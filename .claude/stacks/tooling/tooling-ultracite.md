# Ultracite - Code Quality & Formatting

**Purpose:** Zero-config linting and formatting for TypeScript projects
**Last Updated:** 2025-01-16
**Official Docs:** https://www.ultracite.ai

---

## Overview

Ultracite is a highly opinionated, zero-configuration linter and formatter built as a preset for Biome. It provides automated code formatting and linting optimized for TypeScript development and AI-assisted coding.

**Key Concepts:**
- **Zero Configuration** - Works out-of-box with sensible defaults
- **Lightning Fast** - Built on Biome's Rust foundation for superior performance
- **AI-Ready** - Includes rules specifically designed for AI coding assistants
- **Auto-fixing** - Automatically fixes most issues on save
- **Type Safety** - Enforces TypeScript strict mode
- **Framework Support** - Presets for Next.js, React, Vue, Solid, and more

**Replaces:**
- ESLint (linting)
- Prettier (formatting)
- Stylelint (style linting)

**When to Use:**
- Starting a new TypeScript/JavaScript project
- Want consistent code quality without configuration overhead
- Working with AI coding assistants (Claude, Cursor, etc.)
- Need fast linting and formatting
- Want to reduce tooling complexity

---

## Installation & Setup

**üìö Official Documentation**: [Ultracite - Introduction](https://www.ultracite.ai/introduction)

### Quick Start

Initialize Ultracite in your project:

```bash
npx ultracite@latest init
```

Alternative package managers:
```bash
# pnpm
pnpm dlx ultracite@latest init

# yarn
yarn dlx ultracite@latest init

# bun
bun x ultracite@latest init
```

This will:
1. Install Ultracite and Biome as dependencies
2. Create a minimal configuration file
3. Set up editor integration (if applicable)
4. Configure formatter and linter

### Configuration

Ultracite uses a simple two-line configuration extending presets:

**biome.json**
```json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "extends": ["@ultracite/biome-preset"]
}
```

**For framework-specific presets:**

```json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "extends": ["@ultracite/biome-preset-nextjs"]
}
```

Available presets:
- `@ultracite/biome-preset` - Base preset for all projects
- `@ultracite/biome-preset-nextjs` - Next.js projects
- `@ultracite/biome-preset-react` - React projects
- `@ultracite/biome-preset-vue` - Vue projects
- `@ultracite/biome-preset-solid` - Solid projects

---

## CLI Commands

### Format Code

Fix all formatting and auto-fixable lint issues:

```bash
npx ultracite fix
```

This is the main command you'll use. It:
- Formats all code files
- Applies safe auto-fixes for lint issues
- Updates files in place

### Check for Issues

Check for issues without modifying files:

```bash
npx ultracite check
```

Use this for:
- CI/CD pipelines
- Pre-commit hooks
- Reviewing issues before fixing

### Diagnose Setup

Check if Ultracite is configured correctly:

```bash
npx ultracite doctor
```

This command:
- Verifies installation
- Checks configuration
- Identifies common setup issues
- Provides troubleshooting guidance

### Watch Mode

Run continuously and format on file changes:

```bash
npx ultracite watch
```

Useful during development to see issues in real-time.

---

## Editor Integration

### VS Code

Ultracite automatically configures VS Code to use Biome for formatting and linting.

**Settings (auto-generated by init):**

`.vscode/settings.json`
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "biomejs.biome",
  "editor.codeActionsOnSave": {
    "quickfix.biome": "explicit",
    "source.organizeImports.biome": "explicit"
  }
}
```

**Extension:**
Install the [Biome VS Code extension](https://marketplace.visualstudio.com/items?itemName=biomejs.biome)

### Other Editors

- **JetBrains IDEs**: Built-in Biome support
- **Neovim**: Use `biome` LSP
- **Sublime Text**: Biome package available
- **Zed**: Native Biome support

---

## Integration with Git Hooks

### Using Husky + lint-staged

**Install dependencies:**

```bash
npm install --save-dev husky lint-staged
```

**Configure lint-staged:**

**package.json**
```json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx,json,css,md}": [
      "npx ultracite fix --no-errors-on-unmatched"
    ]
  }
}
```

**Set up Husky:**

```bash
npx husky init
echo "npx lint-staged" > .husky/pre-commit
```

Now code is automatically formatted and fixed on every commit.

---

## CI/CD Integration

### GitHub Actions

**.github/workflows/lint.yml**
```yaml
name: Lint & Format Check

on:
  pull_request:
  push:
    branches: [main]

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run Ultracite check
        run: npx ultracite check
```

### Other CI Platforms

**GitLab CI:**
```yaml
lint:
  script:
    - npm ci
    - npx ultracite check
```

**CircleCI:**
```yaml
- run:
    name: Lint and format check
    command: npx ultracite check
```

---

## Code Standards Enforced

Ultracite enforces a comprehensive set of code quality rules. Key areas:

### Type Safety & TypeScript

- Explicit types for function parameters and return values
- Prefer `unknown` over `any`
- Use const assertions for immutable values
- Leverage type narrowing over type assertions
- No magic numbers (extract to named constants)

### Modern JavaScript/TypeScript

- Arrow functions for callbacks
- `for...of` loops over `.forEach()` and indexed `for`
- Optional chaining (`?.`) and nullish coalescing (`??`)
- Template literals over string concatenation
- Destructuring for object/array assignments
- `const` by default, `let` when needed, never `var`

### Async & Promises

- Always `await` promises in async functions
- Use `async/await` over promise chains
- Proper error handling with try-catch
- No async functions as Promise executors

### React & JSX

- Function components over class components
- Hooks at top level only, never conditionally
- Correct dependency arrays in hooks
- Unique `key` props in lists (prefer IDs over indices)
- Children between tags, not as props
- No nested component definitions
- Semantic HTML and ARIA attributes

### Error Handling

- Remove console statements from production code
- Throw Error objects, not strings
- Meaningful try-catch usage
- Early returns over nested conditionals

### Code Organization

- Focused functions with reasonable complexity
- Extract complex conditions to named variables
- Early returns to reduce nesting
- Simple conditionals over nested ternaries
- Related code grouped together

### Security

- `rel="noopener"` with `target="_blank"`
- Avoid `dangerouslySetInnerHTML`
- No `eval()` or direct `document.cookie` assignment
- Validate and sanitize user input

### Performance

- No spread in loop accumulators
- Top-level regex literals
- Specific imports over namespace imports
- Avoid barrel files
- Proper image components (e.g., Next.js `<Image>`)

---

## Common Patterns

### package.json Scripts

Add these scripts for convenience:

```json
{
  "scripts": {
    "format": "ultracite fix",
    "format:check": "ultracite check",
    "lint": "ultracite check",
    "lint:fix": "ultracite fix"
  }
}
```

Then use:
```bash
npm run format        # Fix all issues
npm run format:check  # Check without fixing
npm run lint          # Same as format:check
npm run lint:fix      # Same as format
```

### Ignoring Files

Create a `.biomeignore` file:

```
# Dependencies
node_modules/
dist/
build/
.next/
out/

# Generated files
*.generated.*
*.d.ts

# Environment
.env*

# Cache
.turbo/
.cache/
```

### Custom Overrides

While Ultracite is zero-config, you can override specific rules:

**biome.json**
```json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "extends": ["@ultracite/biome-preset"],
  "linter": {
    "rules": {
      "suspicious": {
        "noExplicitAny": "off"
      }
    }
  }
}
```

**Note:** Overriding defeats the purpose of zero-config. Only do this if absolutely necessary.

---

## Monorepo Support

Ultracite works great in monorepos. Place `biome.json` at the root:

**Root biome.json:**
```json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "extends": ["@ultracite/biome-preset"]
}
```

Run from root:
```bash
npx ultracite fix
```

This formats all packages consistently.

**Per-package customization:**

If specific packages need different presets (e.g., one uses Next.js):

**packages/web/biome.json:**
```json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "extends": ["@ultracite/biome-preset-nextjs"]
}
```

---

## Migration from ESLint/Prettier

### Step 1: Remove Old Tools

```bash
npm uninstall eslint prettier @typescript-eslint/* eslint-*
```

Delete these files:
- `.eslintrc.*`
- `.prettierrc.*`
- `.prettierignore`

### Step 2: Install Ultracite

```bash
npx ultracite@latest init
```

### Step 3: Update Scripts

**Before:**
```json
{
  "scripts": {
    "lint": "eslint . --ext .ts,.tsx",
    "format": "prettier --write ."
  }
}
```

**After:**
```json
{
  "scripts": {
    "lint": "ultracite check",
    "format": "ultracite fix"
  }
}
```

### Step 4: Update CI/CD

Replace `npm run lint && npm run format:check` with:
```bash
npx ultracite check
```

### Step 5: Update Git Hooks

**Before (Husky + lint-staged):**
```json
{
  "lint-staged": {
    "*.{ts,tsx}": ["eslint --fix", "prettier --write"]
  }
}
```

**After:**
```json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx,json,css,md}": [
      "npx ultracite fix --no-errors-on-unmatched"
    ]
  }
}
```

---

## Troubleshooting

### "Command not found: ultracite"

**Solution:** Use `npx ultracite` instead of `ultracite`:
```bash
npx ultracite fix
```

Or install globally:
```bash
npm install -g ultracite
```

### Editor Not Formatting on Save

**Solution:**
1. Install Biome extension for your editor
2. Run `npx ultracite init` to regenerate editor config
3. Restart editor
4. Check `.vscode/settings.json` exists and has correct config

### "No files matched"

**Solution:** Check your `.biomeignore` file. Remove overly broad patterns.

### Conflicts with Existing ESLint/Prettier

**Solution:** Remove ESLint and Prettier completely before using Ultracite:
```bash
npm uninstall eslint prettier
rm .eslintrc.* .prettierrc.*
```

### Too Many Errors on First Run

**Solution:** This is normal. Run:
```bash
npx ultracite fix
```

Most issues will auto-fix. Review remaining issues manually.

### Different Formatting in CI vs Local

**Solution:** Ensure same Ultracite/Biome version everywhere. Lock versions in `package.json`:
```json
{
  "devDependencies": {
    "ultracite": "1.0.0"
  }
}
```

---

## Best Practices

### 1. Run on Every Save

Configure your editor to format on save. This prevents formatting noise in commits.

### 2. Use in Pre-commit Hooks

Prevent broken code from being committed:
```bash
npx husky init
echo "npx ultracite check --staged" > .husky/pre-commit
```

### 3. Enforce in CI

Add checks to your CI pipeline:
```yaml
- run: npx ultracite check
```

### 4. Team Adoption

- Add `.vscode/settings.json` to git (not `.gitignore`)
- Document in README that team must use Ultracite
- Add editor setup to onboarding docs

### 5. Incremental Migration

For large codebases:
1. Run `npx ultracite fix` on one directory at a time
2. Commit changes per directory
3. Review and test before moving to next directory

---

## AI Coding Assistant Integration

Ultracite is specifically designed to work well with AI assistants.

### Claude Code

Ultracite automatically works with Claude Code. After running `npx ultracite init`:

1. Claude will format code correctly on generation
2. Standards are enforced automatically
3. No need to prompt Claude about formatting

### Cursor

Same as Claude Code - Ultracite integrates seamlessly.

### GitHub Copilot

Copilot respects Biome configuration. Format suggestions with:
```bash
npx ultracite fix
```

---

## Framework-Specific Guidance

### Next.js

Use the Next.js preset:
```json
{
  "extends": ["@ultracite/biome-preset-nextjs"]
}
```

Enforces:
- Next.js `<Image>` component over `<img>`
- `next/head` or metadata API for head elements
- Server Components patterns

### React

Use the React preset:
```json
{
  "extends": ["@ultracite/biome-preset-react"]
}
```

Enforces:
- React 19 patterns (ref as prop)
- Proper hook usage
- Accessibility (ARIA)

### Vue/Solid/Svelte

These frameworks use `class` and `for` attributes (not `className` or `htmlFor`).

Use appropriate preset:
```json
{
  "extends": ["@ultracite/biome-preset-vue"]
}
```

---

## Performance

Ultracite (via Biome) is **incredibly fast**:

- 10-100x faster than ESLint
- Formats entire codebases in milliseconds
- Runs on every save without lag

**Benchmark (1000 TypeScript files):**
- ESLint + Prettier: ~30 seconds
- Ultracite: ~300ms

This speed enables real-time formatting and linting.

---

## When NOT to Use Ultracite

- **Highly customized linting needs**: If you need very specific, custom rules that don't exist in Biome
- **Legacy projects with complex ESLint configs**: Migration might be difficult
- **Non-TypeScript/JavaScript projects**: Ultracite is designed for TS/JS

For these cases, stick with ESLint/Prettier or explore other tools.

---

## Comparison with Alternatives

### Ultracite vs ESLint + Prettier

**Ultracite:**
- ‚úÖ Zero config
- ‚úÖ 10-100x faster
- ‚úÖ Single tool
- ‚úÖ AI-ready rules
- ‚ùå Less customizable

**ESLint + Prettier:**
- ‚ùå Requires extensive configuration
- ‚ùå Slower
- ‚ùå Two separate tools
- ‚úÖ Highly customizable
- ‚úÖ Larger plugin ecosystem

### Ultracite vs Biome (vanilla)

**Ultracite:**
- ‚úÖ Opinionated presets (zero config)
- ‚úÖ Framework-specific rules
- ‚úÖ AI-optimized defaults
- ‚ùå Less control

**Biome:**
- ‚úÖ Full control over every rule
- ‚úÖ Official tool
- ‚ùå Requires configuration
- ‚ùå No presets

**Recommendation:** Use Ultracite unless you need custom rules.

---

## Resources

**Official Documentation:**
- Website: https://www.ultracite.ai
- Introduction: https://www.ultracite.ai/introduction

**Biome (underlying engine):**
- Website: https://biomejs.dev
- Docs: https://biomejs.dev/guides/getting-started

**Community:**
- GitHub: Check Ultracite's GitHub for issues/discussions
- Discord: Biome community discord

---

## Summary

Ultracite is the **zero-config code quality solution** for modern TypeScript projects:

‚úÖ **Fast** - Rust-based, 10-100x faster than ESLint
‚úÖ **Simple** - Two-line config, works out-of-box
‚úÖ **AI-Ready** - Optimized for Claude, Cursor, etc.
‚úÖ **Complete** - Replaces ESLint + Prettier + Stylelint
‚úÖ **Modern** - Enforces TypeScript strict mode and best practices

**Perfect for:**
- New projects starting fresh
- Teams wanting consistent code without config overhead
- AI-assisted development workflows
- Fast CI/CD pipelines

**Getting Started:**
```bash
npx ultracite@latest init
npx ultracite fix
```

Done. Your code is now formatted and linted to modern standards.
